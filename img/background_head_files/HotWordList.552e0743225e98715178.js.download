(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[107],{3096:function(t,e,r){t.exports={keyword:"F2JPgx"}},3097:function(t,e,r){t.exports={container:"_1HpIaC",list:"JpRXYU"}},3659:function(t,e,r){"use strict";r.r(e);var a=r(0),n=r(71),o=r(54),i=r(557),s=r.n(i),c=r(374),u=r(554),p=r(398),f=r(306),d=r(908),l=r(3096),h=r.n(l);var v=d.a.searchWithQuery,b=function(t){var e,r;function n(e){var r;return(r=t.call(this,e)||this).onClick=r.onClick.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=n.prototype;return o.onClick=function(){var t=this.props,e=t.keyword,r=t.trackingClick,a=t.searchParams,n=t.targetSearchParams,o=t.recordSearchHistory,i=t.index;Object(u.a)({action:"submitKeyboardSearch",data:{keyword:e,inputType:"popular_search",targetSearchParams:n,searchParams:a,isMallSearch:!!this.context.isOfficialShopPath,absoluteLocation:i,relativeLocation:i},track:this.props.contextOnTrack}),o("product",e),r&&r()},o.render=function(){var t=this.props,e=t.trackingRef,r=t.keyword,n=t.targetSearchParams;return a.createElement(c.a,{onClick:this.onClick,to:v(n),className:h.a.keyword,innerRef:e},r)},n}(a.Component);b.contextTypes={isOfficialShopPath:s.a.bool};var y,m,O=Object(o.d)(Object(p.b)("HotwordItem"),Object(f.a)())(b),S=r(22),k=r(256),_=r(11),E=r(1),C=Object(E.b)("FETCH_POP_SEARCH"),g="popsearch_sec";function j(){return(j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var R={progress:_.b.INIT,state_update_time:0},w={update_time:0,version:"",sections:(y={},y[g]={total:0,data:[]},y)},P=Object(S.a)(((m={})[C.REQUESTED]=function(t){return j({},t,{progress:_.b.REQ,error:0,state_update_time:0})},m[C.SUCCESS]=function(t,e){var r,a=e.payload,n=a.offset,o=a.data,i=a.shouldReset,s=t&&t.data||w;return j({},t,{data:j({},s,{update_time:o.update_time,version:o.version,sections:j({},s.sections,(r={},r[g]={total:o.sections[g].total,data:Object(k.b)(i?[]:s.sections[g].data,o.sections[g].data,n)},r))}),progress:_.b.OK,state_update_time:Date.now()})},m[C.FAILED]=function(t,e){var r=e.payload.error;return j({},t,{progress:_.b.ERR,error:r})},m),R),I=r(38),x=r(14),T=r(2),D="/api/v4/recommend/recommend";function H(t){var e,r={update_time:t.data.update_time,version:t.data.version,sections:(e={},e[g]={total:0,data:[]},e)},a=t.data.sections.find(function(t){return t&&t.key===g});if(!a||!a.index||!a.data)return r;var n=a.index,o=a.data,i=a.total;return r.sections[g].total=i||0,n.forEach(function(t){var e=o.keyword.find(function(e){return e.key===t.key});e&&r.sections[g].data.push(e)}),r}function F(t){var e=t.limit,r=void 0===e?8:e,a=t.offset,n=void 0===a?0:a,o=t.getStore,i=t.onFinish,s=t.shouldSkipCall,c=t.shouldReset,u=t.version,p=Object(x.f)({bundle:"popsearch",limit:r,offset:n,version:n>0&&u||void 0});return Object(I.a)({apiCall:function(){return function(t){return Object(T.fetchInfo)(""+D+t)}(p)},actions:[function(){return{type:C.REQUESTED}},function(t,e){return{type:C.SUCCESS,payload:{offset:n,data:H(e),shouldReset:c}}},function(t,e){return{type:C.FAILED,payload:{error:e.error}}}],shouldSkipCall:o&&!s?N(o):s,onFinish:i})}function N(t){return function(e){var r=t(e);return!!(r&&r&&r.state_update_time)&&r.state_update_time>Date.now()-6e4}}var A=[];function Q(){return(Q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t}).apply(this,arguments)}var U=r(246),J=r(1004),L="popSearch",K=r(3097),Y=r.n(K),M=[_.b.INIT,_.b.REQ];function W(t){return t[L]}e.default=function(t){var e=t.searchParams,r=a.useContext(U.a).injectAsyncReducer;a.useEffect(function(){var t;r(((t={})[L]=P,t))},[r]);var o=Object(n.useDispatch)();a.useEffect(function(){o(F({offset:0,limit:8,getStore:W}))},[o]);var i,s=a.useCallback(function(t,e){o(function(t,e,r){return void 0===r&&(r={}),Q({type:"RECORD_SEARCH_HISTORY",searchType:t,data:e},r,{isOfficialShop:!1})}(t,e))},[o]),c=Object(n.useSelector)(W);if(M.includes((i=c)?i.progress:_.b.INIT))return null;var u=function(t){return t&&t.data?t.data.sections[g].data:A}(c);return!u||u.length<2?null:a.createElement("div",{className:Y.a.container},a.createElement("div",{className:Y.a.list},u.map(function(t,r){var n=t.keyword,o=t.info,i=t.label;if(!n)return null;var c=Object(J.a)(n,e);return a.createElement(O,{key:n,keyword:n,recordSearchHistory:s,index:r,searchParams:e,targetSearchParams:c,info:o,intentionid:i})})))}}}]);
//# sourceMappingURL=https://shopee.sg/assets/HotWordList.552e0743225e98715178.js.map